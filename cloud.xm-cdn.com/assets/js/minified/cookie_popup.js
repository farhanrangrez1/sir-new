(function(e){function f(){var g=typeof domainName==="undefined"?cookieDomain:domainName;var j="xmcplc";var h="xmck_";var i=[];var k=null;this.setCookie=function(m,o,p){var n=h+m||j;o=o||"1";p=p||180;if(e.cookie(n)!==o){e.cookie(n,o,{expires:p,path:"/",domain:g});if(window.location.hostname==="localhost"){e.cookie(n,o,{expires:p,path:"/",domain:"localhost"})}if(typeof dataLayer!=="undefined"&&Array.isArray(dataLayer)&&parseInt(o)===1){var l=n+"_on";if(e.inArray(l,i)===-1){dataLayer.push({event:l});i.push(l)}}}};this.getCookie=function(m,l){var n=!!l?m:h+m||j;return e.cookie(n)}}function d(i){var g=this;var h={functional:true,analytical:false,promotional:false,preferences:false};this.onDataChanged=function(){};this.onSave=function(){};this.setCookiePart=function(j,l,k){var m={};m[j]=l;this.setData(m,k)};this.setData=function(k,m){var j=false;for(var l in k){if(h.hasOwnProperty(l)){h[l]=!!k[l];j=true}}if(j){if(m){this.save()}this.onDataChanged()}};this.enableAll=function(j){this.setData({functional:true,analytical:true,promotional:true,preferences:true},j)};this.isEnabledAll=function(){for(var j in this.getData()){if(!this.get(j)){return false}}return true};this.getData=function(){return h};this.has=function(j){return h.hasOwnProperty(j)};this.get=function(j){return h[j]};this.save=function(j){Object.keys(this.getData()).forEach(function(k){var l=k;if(!j||i.getCookie(l)===null){i.setCookie(l,g.get(k)?"1":"0")}});this.onSave()};this.load=function(){var j={};Object.keys(this.getData()).forEach(function(k){var l=i.getCookie(k);if(l!==null){j[k]=i.getCookie(k)==="1"}});c(j.promotional,j.analytical);j.functional=true;this.setData(j)}}function c(h,g){if(h!==undefined&&g!==undefined){if(window.cookiesCallback){window.cookiesCallback(h,g)}}}function a(n,i){var o=this;var j=false;var k=e(document);var h="popupShown";var p=e("#cookieModal");var l="riskWarningBarDisplay";var m=navigator.userAgent.toLowerCase().match(/mobile/i);var g=e("#risk-block span").hasClass("js-esmaRiskMsg");n.load();n.save(true);n.onDataChanged=function(){if(!j){j=true;o.refreshInputs();j=false}};n.onSave=function(){o.displayBottomPanel(!n.isEnabledAll())};p.on("hidden.bs.modal",function(){o.displayBottomPanel(!n.isEnabledAll())});k.on("click",".js-cookieCheckList input[type=checkbox]",function(q){n.setCookiePart(q.target.dataset.cookiesParts,q.target.checked)});k.on("click",".js-saveCookie",function(){c(n.getData()["promotional"],n.getData()["analytical"]);n.save();o.setPopupShown()});k.on("click","#js-changeModalSettings",function(){e(".cookie-modal__defaultBlock").hide();e(".cookie-modal__settingBlock").fadeIn()});k.on("click",".js-showModalCookieGeneral",function(){o.displayPopup(true)});k.on("click",".js-showModalCookieSettings",function(){o.displayPopup(true);e(".cookie-modal__defaultBlock").hide();e(".cookie-modal__settingBlock").fadeIn();e('.cookie-modalTabs a[href="#changeSettings"]').tab("show")});k.on("click","#js-cookieBarCloseButton",function(){o.displayBottomPanel(false)});k.on("click","#accept_default_cookie,  .js-acceptDefaultCookie",function(q){q.preventDefault();n.enableAll(true);c(true,true);o.displayPopup(false);o.setPopupShown()});if(m&&g){if(e("#xmAppSlideIn").length!==0){xmAppDrawerPos()}k.on("click","#js-riskCloseButton",function(){var q=e("#js-riskCloseButton").attr("class");var r;if(q==="minimise"){r=1}else{if((q==="minimise up")){r=2}}o.setRiskWarningBarDisplayCookie(r);if(e("#xmAppSlideIn").length!==0){xmAppDrawerPos()}})}p.addClass("js-cookie-popup-loaded");this.refreshInputs=function(){try{e(".js-cookieCheckList input[type=checkbox]").each(function(r,t){var s=t.dataset.cookiesParts;if(n.has(s)){t.checked=n.get(s)}})}catch(q){console.log("Error",q)}};this.displayPopup=function(q){if(typeof isXmauPopupDisplayed==="function"&&isXmauPopupDisplayed()){return}if(q){p.modal({backdrop:"static",keyboard:false,show:true});o.displayBottomPanel(false)}else{p.modal({backdrop:"static",keyboard:false,show:false})}};this.setPopupShown=function(){i.setCookie(h,"1")};this.setRiskWarningBarDisplayCookie=function(q){i.setCookie(l,q,14)};this.isRiskWarningBarDisplayCookieSet=function(){return i.getCookie(l)==="1"||i.getCookie(l)==="2"};this.getRiskWarningBarDisplayCookie=function(){return i.getCookie(l)};this.isPopupShown=function(){return i.getCookie(h)==="1"};this.displayBottomPanel=function(q){if(q){e("#cookies-block").show();e("#js-cookieBarHeight").show()}else{e("#cookies-block").hide();e("#js-cookieBarHeight").hide()}};this.isMobile=function(){return m};this.isEsma=function(){return g};this.displayRiskWarningBar=function(q){if(q==="2"){e("#js-riskCloseButton").addClass("minimise up");e(this).toggleClass("up");e("#risk-block span.js-esmaRiskMsg").toggle();b();if(e("#js-riskCloseButton").hasClass("up")){setHeightRiskBox()}b()}else{if(q==="1"){e("#js-riskCloseButton").removeClass("minimise up");e("#js-riskCloseButton").addClass("minimise")}}if(e("#xmAppSlideIn").length!==0){xmAppDrawerPos()}}}function b(){var j,h,g,i;j=e("#risk-block");h=j.find("#js-riskCloseButton");g=j.hasClass("isUK");$widgetOptions=e("#widgetOptions");i=window.matchMedia("(max-width: 992px)").matches?h.outerHeight():0;if(j.length&&h.length){e("#new-live-chat-icon, #custom-livechat").css("bottom",j.outerHeight()+i);$widgetOptions.css("bottom",j.outerHeight()+i)}else{if(j.length&&!g){e("#new-live-chat-icon, #custom-livechat").css("bottom",j.outerHeight());$widgetOptions.css("bottom",j.outerHeight())}else{e("#new-live-chat-icon, #custom-livechat").css("bottom",0);$widgetOptions.css("bottom",0)}}}e(document).ready(function(){function j(){var n=new f();var l=new d(n);var m=new a(l,n);m.refreshInputs();m.displayBottomPanel(!l.isEnabledAll());var o=k();m.displayPopup(!l.isEnabledAll()&&!m.isPopupShown()&&o.showPopup);if(m.isRiskWarningBarDisplayCookieSet()&&m.isMobile()&&m.isEsma()){m.displayRiskWarningBar(m.getRiskWarningBarDisplayCookie())}}function i(){var l=navigator.userAgent.toLowerCase().match(/mobile/i);if(l===null){return -1}var p=window.location.search;var m=new URLSearchParams(p);var o="-1";var n=m.has("attStatus");if(n){o=m.get("attStatus")}return o}function k(){var l=i();switch(l){case"0":case"1":case"2":return{cookiesData:{functional:1,analytical:0,promotional:0,preferences:0},showPopup:false};case"3":return{cookiesData:{functional:1,analytical:1,promotional:1,preferences:1},showPopup:false};case"-1":default:return{cookiesData:{functional:1,analytical:0,promotional:0,preferences:0},showPopup:true}}}function g(){var p=k();var l=typeof domainName==="undefined"?cookieDomain:domainName;cookieGroupsDefaultValues=p.cookiesData;var o=new Date();var n=o.setDate(o.getDate()+180);for(var m in cookieGroupsDefaultValues){if((new RegExp("xmck_"+m,"gi").exec(document.cookie))==null){document.cookie="xmck_"+m+"="+cookieGroupsDefaultValues[m]+"; path=/; domain="+l+"; expired="+n.toString()}}}g();var h=setInterval(function(){if(typeof e().modal==="function"&&typeof e.cookie==="function"){clearInterval(h);j()}},100)})})(jQuery);